--- 
title: "akshare"
author: "roywei"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
##设置Python工作环境
```{r}
require(reticulate)
use_python('D:/anaconda3/envs/akshare/python.exe')
ak <- import('akshare')
tdx <- import('mootdx.reader')
tdx.reader <- tdx$Reader$factory(market='std', tdxdir='d:/new_zxjt_vip')
```

##快速上手

```{python }
# 使用最快的服务器
python -m mootdx bestip -vv
离线数据读取
from mootdx.reader import Reader
```
```{r}
# market: 参数 `std` 为标准市场(就是股票), `ext` 为扩展市场(期货，黄金等)
# tdxdir: 是通达信的数据目录, 根据自己的情况修改
tdx <- import('mootdx.reader')
tdx.reader = tdx$Reader$factory(market='std', tdxdir='d:/new_zxjt_vip')

# 读取日线数据
tdx.reader$daily(symbol='600036')

# 读取分钟数据
tdx.reader$minute(symbol='600036')

# 读取时间线数据
tdx.reader$fzline(symbol='600036')
```


##线上行情读取
```{r}
# from mootdx.quotes import Quotes
tdx.quo <- import('mootdx.quotes')
# 标准市场
client = tdx.quo$Quotes$factory(market='std', multithread="True", heartbeat="True", bestip="True", timeout=15)

# k 线数据
client$bars(symbol='600036', frequency=9, offset=10)

# 指数
client$index(symbol='000001', frequency=9)

# 分钟
client$minute(symbol='000001')


```

##财务数据读取
```{python }
from mootdx.affair import Affair

# 远程文件列表
files = Affair.files()

# 下载单个
Affair.fetch(downdir='tmp', filename='gpcw19960630.zip')

# 下载全部
Affair.fetch(downdir='tmp')
```

